# Auto-generated by weixin cloudbase vscode extension
FROM alpine:3.13
RUN apk add tzdata && cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && echo Asia/Shanghai > /etc/timezone
RUN apk add ca-certificates
RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.tencent.com/g' /etc/apk/repositories     && apk add --update --no-cache     php7     php7-json     php7-ctype 	php7-exif 	php7-pdo     php7-pdo_mysql     php7-fpm     php7-curl     apache2     php7-apache2     && rm -f /var/cache/apk/*
WORKDIR /app
COPY . /app
RUN chown -R apache:apache /app     && chmod -R 755 /app     && chmod -R 777 /app/runtime     && cp /app/conf/httpd.conf /etc/apache2/httpd.conf     && cp /app/conf/php.ini /etc/php7/php.ini     && mv /usr/sbin/php-fpm7 /usr/sbin/php-fpm

CMD [ "httpd", "-DFOREGROUND" ]